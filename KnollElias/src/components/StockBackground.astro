---
// import TextLink from '../elements/3textlink.astro'
import Resume from '../elements/Resume.astro'
import ResumeItem from '../elements/ResumeItem.astro'

import c1 from '../../public/certificates/W3_cdev.pdf';
import c2 from '../../public/certificates/UC_SEO.jpg';
import c3 from '../../public/certificates/OU_student.pdf';
import c4 from '../../public/certificates/OU_SCOD.pdf';
---

<div>
  <!-- <TextLink /> -->
  <Resume />
  <div class="resumeItems" >
    <ResumeItem key={4} title={"core coding concepts, OpenUniversity"} text={"I did this course etc.."} file={c4} filetype={"pdf"} width={300} height={300} />
    <ResumeItem key={3} title={"Being an OU Student, OpenUniversity"} text={"I did this course etc.."} file={c3} filetype={"pdf"} width={300} height={300} />
    <ResumeItem key={2} title={"SEO ECommerce Mastery, Udemy"} text={"I did this course etc.."} file={c2} filetype={"jpg"} width={300} height={300} />
    <ResumeItem key={1} title={"C# Programming Using, W3Schools"} text={"I did this course etc.."} file={c1} filetype={"pdf"} width={300} height={300} />
  </div>
</div>

<script>
  let openedResumeKey = 0;
  let collapseTimeoutId;

  function updateDisplay(key, show) {
    const activeItem = document.getElementById('resume-item-' + key);
    if (activeItem) {
      const textAndFile = activeItem.querySelector('.text-and-file');
      textAndFile.style.display = show ? 'block' : 'none';
    }
  }

  window.addEventListener('set-open-key', (event) => {
    if (collapseTimeoutId) {
      clearTimeout(collapseTimeoutId);
    }
    openedResumeKey = event.detail.key;
    updateDisplay(openedResumeKey, true);
  });

  window.addEventListener('clear-open-key', () => {
    collapseTimeoutId = setTimeout(() => {
      updateDisplay(openedResumeKey, false);
    }, 3000);
  });

  document.querySelectorAll('.container').forEach(item => {
    item.addEventListener('mouseleave', () => {
      window.dispatchEvent(new CustomEvent('clear-open-key'));
    });
  });
</script>

<style>
  .resumeItems {
    width: 80vw;
  }
  p {
    padding: 0;
    margin: 0;
  }
  div {
    background: linear-gradient(to bottom, rgb(0, 0, 0), rgb(10, 10, 10));
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
</style>
